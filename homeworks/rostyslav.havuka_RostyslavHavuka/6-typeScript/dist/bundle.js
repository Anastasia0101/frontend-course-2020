(()=>{var e=document.querySelector("[data-score]"),t=document.querySelector("[data-cube]"),r=document.querySelector("[data-cube-score]"),s=document.querySelector("[data-key]"),i=document.querySelector("[data-progress-bar]"),a=document.querySelector("[data-key-start]"),n=document.querySelector("[data-key-stop]"),o=document.querySelector("[data-key-again]");new(function(){function t(e,t,r,s,i){this.scoreElement=e,this.cubeScoreElement=t,this.keyElement=r,this.cubeElement=s,this.progressBarElement=i,this.currentKey="",this.score=100,this.interval=2e3,this.gameState=!1,this.timerProgressBar=0}return t.prototype.start=function(){var e=this;window.addEventListener("load",this.startKeysInterval()),this.subscribeOnKeyPress(),a.addEventListener("click",(function(){!1===e.gameState&&(e.width=1,e.progressBar(),e.progressBarElement.classList.remove("hidden"),clearInterval(e.intervalId),e.intervalId=setInterval((function(){e.subScoreTimer(e.score),e.sizeDown(),e.width=1,e.progressBar()}),3e3)),e.gameState=!0})),n.addEventListener("click",(function(){e.gameState=!1,e.progressBarElement.classList.add("hidden"),clearInterval(e.intervalStatusBarId),e.timerProgressBar=0,e.width=99,clearInterval(e.intervalId),alert("your Score:"+e.score),e.score=100,r.innerText=e.score.toString(),e.scoreElement.innerText=""})),o.addEventListener("click",(function(){!0===e.gameState&&(e.score=100,e.width=1,e.progressBar(),r.innerText=e.score.toString(),e.scoreElement.innerText="",clearInterval(e.intervalId),e.intervalId=setInterval((function(){e.subScoreTimer(e.score),e.sizeDown(),e.width=1,e.progressBar()}),3e3),e.gameState=!0)}))},t.prototype.startKeysInterval=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890",t=0;t<1;t++)this.currentKey=e.charAt(Math.floor(Math.random()*e.length));s.value=this.currentKey.toUpperCase()},t.prototype.trueGame=function(){!0===this.gameState?(this.startKeysInterval(),this.addScore(),this.setNewInterval(),this.sizeUp(),clearInterval(this.intervalStatusBarId),this.width=1,this.timerProgressBar=0,this.progressBar()):alert('Please press "Start"')},t.prototype.falseGame=function(){!0===this.gameState?(this.subScore(),this.startKeysInterval(),this.setNewInterval(),this.sizeDown(),clearInterval(this.intervalStatusBarId),this.width=1,this.timerProgressBar=0,this.progressBar()):alert('Please press "Start"')},t.prototype.setKey=function(e){e.key===s.value.toLowerCase()?this.trueGame():this.falseGame()},t.prototype.setNewInterval=function(){var e=this;!0===this.gameState&&(clearInterval(this.intervalId),this.intervalId=setInterval((function(){e.subScoreTimer(e.score),e.sizeDown(),clearInterval(e.intervalStatusBarId),e.width=1,e.timerProgressBar=0,e.progressBar()}),3e3))},t.prototype.addScore=function(){var t=this.randomNumber(5,10);this.score=this.score+t,r.innerText=this.score.toString(),e.innerText="+"+t},t.prototype.subScore=function(){var t=this.randomNumber(20,25);this.score=this.score-t,r.innerText=this.score.toString(),e.innerText="-"+t},t.prototype.subScoreTimer=function(t){var s=this.randomNumber(10,15);this.score=this.score-s,this.finishGame(),r.innerText=this.score.toString(),e.innerText="-"+s},t.prototype.subscribeOnKeyPress=function(){var e=this;window.addEventListener("keypress",(function(t){e.setKey(t),e.finishGame()}))},t.prototype.randomNumber=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},t.prototype.sizeUp=function(){var e=document.getElementById("box"),t=parseInt(e.style.width),r=parseInt(e.style.height);e.style.width=t+3+"px",e.style.height=r+3+"px"},t.prototype.sizeDown=function(){var e=document.getElementById("box"),t=parseInt(e.style.width),r=parseInt(e.style.height);e.style.width=t-2+"px",e.style.height=r-2+"px"},t.prototype.progressBar=function(){var e=this;if(0==this.timerProgressBar){this.timerProgressBar=1;var t=document.getElementsByClassName("myBar");this.width=1,this.intervalStatusBarId=setInterval((function(){if(e.width>=100)clearInterval(e.intervalStatusBarId),e.timerProgressBar=0;else{e.width++;for(var r=0,s=t;r<s.length;r++)s[r].style.width=e.width+"%"}}),30)}},t.prototype.finishGame=function(){var e=this;this.score>=200&&(alert("You WON! Your Score: 200"),this.score=100,this.width=1,this.progressBar(),r.innerText=this.score.toString(),this.scoreElement.innerText="",clearInterval(this.intervalId),this.intervalId=setInterval((function(){e.subScoreTimer(e.score),e.sizeDown(),e.width=1,e.progressBar()}),3e3),this.gameState=!0),this.score<=0&&(alert("Try Again! Your Score:0"),this.score=100,this.width=1,this.progressBar(),r.innerText=this.score.toString(),this.scoreElement.innerText="",clearInterval(this.intervalId),this.intervalId=setInterval((function(){e.subScoreTimer(e.score),e.sizeDown(),e.width=1,e.progressBar()}),3e3),this.gameState=!0)},t}())(e,r,s,t,i).start()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly82LXR5cGVzY3JpcHQvLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsic2NvcmVFbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY3ViZUVsZW1lbnQiLCJjdWJlU2NvcmVFbGVtZW50Iiwia2V5RWxlbWVudCIsInByb2dyZXNzQmFyRWxlbWVudCIsImtleVN0YXJ0Iiwia2V5U3RvcCIsImtleUFnYWluIiwiY3VycmVudEtleSIsInNjb3JlIiwiaW50ZXJ2YWwiLCJnYW1lU3RhdGUiLCJ0aW1lclByb2dyZXNzQmFyIiwic3RhcnQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwidGhpcyIsInN0YXJ0S2V5c0ludGVydmFsIiwic3Vic2NyaWJlT25LZXlQcmVzcyIsIndpZHRoIiwicHJvZ3Jlc3NCYXIiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJjbGVhckludGVydmFsIiwiaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwic3ViU2NvcmVUaW1lciIsInNpemVEb3duIiwiYWRkIiwiaW50ZXJ2YWxTdGF0dXNCYXJJZCIsImFsZXJ0IiwiaW5uZXJUZXh0IiwidG9TdHJpbmciLCJwb3NzaWJsZSIsImkiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJsZW5ndGgiLCJ2YWx1ZSIsInRvVXBwZXJDYXNlIiwidHJ1ZUdhbWUiLCJhZGRTY29yZSIsInNldE5ld0ludGVydmFsIiwic2l6ZVVwIiwiZmFsc2VHYW1lIiwic3ViU2NvcmUiLCJzZXRLZXkiLCJlIiwia2V5IiwidG9Mb3dlckNhc2UiLCJybmRvbSIsInJhbmRvbU51bWJlciIsImZpbmlzaEdhbWUiLCJtaW4iLCJtYXgiLCJvYmoiLCJnZXRFbGVtZW50QnlJZCIsInBhcnNlSW50Iiwic3R5bGUiLCJoZWlnaHQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIl0sIm1hcHBpbmdzIjoiTUFBQSxJQUFNQSxFQUFlQyxTQUFTQyxjQUFjLGdCQUN0Q0MsRUFBY0YsU0FBU0MsY0FBYyxlQUNyQ0UsRUFBbUJILFNBQVNDLGNBQWMscUJBQzFDRyxFQUFhSixTQUFTQyxjQUFjLGNBQ3BDSSxFQUFxQkwsU0FBU0MsY0FBYyx1QkFDNUNLLEVBQVdOLFNBQVNDLGNBQWMsb0JBQ2xDTSxFQUFVUCxTQUFTQyxjQUFjLG1CQUNqQ08sRUFBV1IsU0FBU0MsY0FBYyxvQkE2TzNCLElBM09iLFdBVUUsV0FDVUYsRUFDQUksRUFDQUMsRUFDQUYsRUFDQUcsR0FKQSxLQUFBTixlQUNBLEtBQUFJLG1CQUNBLEtBQUFDLGFBQ0EsS0FBQUYsY0FDQSxLQUFBRyxxQkFkRixLQUFBSSxXQUFxQixHQUNyQixLQUFBQyxNQUFnQixJQUNoQixLQUFBQyxTQUFtQixJQUduQixLQUFBQyxXQUFxQixFQUNyQixLQUFBQyxpQkFBMkIsRUFrT3JDLE9Bdk5FLFlBQUFDLE1BQUEsc0JBQ0VDLE9BQU9DLGlCQUFpQixPQUFRQyxLQUFLQyxxQkFFckNELEtBQUtFLHNCQUVMYixFQUFTVSxpQkFBaUIsU0FBUyxZQUNWLElBQW5CLEVBQUtKLFlBQ1AsRUFBS1EsTUFBUSxFQUNiLEVBQUtDLGNBQ0wsRUFBS2hCLG1CQUFtQmlCLFVBQVVDLE9BQU8sVUFDekNDLGNBQWMsRUFBS0MsWUFDbkIsRUFBS0EsV0FBYUMsYUFBWSxXQUM1QixFQUFLQyxjQUFjLEVBQUtqQixPQUN4QixFQUFLa0IsV0FDTCxFQUFLUixNQUFRLEVBQ2IsRUFBS0MsZ0JBQ0osTUFFTCxFQUFLVCxXQUFZLEtBR25CTCxFQUFRUyxpQkFBaUIsU0FBUyxXQUNoQyxFQUFLSixXQUFZLEVBQ2pCLEVBQUtQLG1CQUFtQmlCLFVBQVVPLElBQUksVUFDdENMLGNBQWMsRUFBS00scUJBQ25CLEVBQUtqQixpQkFBbUIsRUFDeEIsRUFBS08sTUFBUSxHQUNiSSxjQUFjLEVBQUtDLFlBQ25CTSxNQUFNLGNBQWdCLEVBQUtyQixPQUMzQixFQUFLQSxNQUFRLElBQ2JQLEVBQWlCNkIsVUFBWSxFQUFLdEIsTUFBTXVCLFdBQ3hDLEVBQUtsQyxhQUFhaUMsVUFBWSxNQUdoQ3hCLEVBQVNRLGlCQUFpQixTQUFTLFlBQ1YsSUFBbkIsRUFBS0osWUFDUCxFQUFLRixNQUFRLElBQ2IsRUFBS1UsTUFBUSxFQUNiLEVBQUtDLGNBQ0xsQixFQUFpQjZCLFVBQVksRUFBS3RCLE1BQU11QixXQUN4QyxFQUFLbEMsYUFBYWlDLFVBQVksR0FDOUJSLGNBQWMsRUFBS0MsWUFDbkIsRUFBS0EsV0FBYUMsYUFBWSxXQUM1QixFQUFLQyxjQUFjLEVBQUtqQixPQUN4QixFQUFLa0IsV0FDTCxFQUFLUixNQUFRLEVBQ2IsRUFBS0MsZ0JBQ0osS0FDSCxFQUFLVCxXQUFZLE9BS2YsWUFBQU0sa0JBQVIsV0FFRSxJQURBLElBQUlnQixFQUFtQixpRUFDZEMsRUFBSSxFQUFHQSxFQUFJLEVBQUdBLElBQ3JCbEIsS0FBS1IsV0FBYXlCLEVBQVNFLE9BQU9DLEtBQUtDLE1BQU1ELEtBQUtFLFNBQVdMLEVBQVNNLFNBQ3hFcEMsRUFBV3FDLE1BQVF4QixLQUFLUixXQUFXaUMsZUFHN0IsWUFBQUMsU0FBUixZQUN5QixJQUFuQjFCLEtBQUtMLFdBQ1BLLEtBQUtDLG9CQUNMRCxLQUFLMkIsV0FDTDNCLEtBQUs0QixpQkFDTDVCLEtBQUs2QixTQUNMdEIsY0FBY1AsS0FBS2EscUJBQ25CYixLQUFLRyxNQUFRLEVBQ2JILEtBQUtKLGlCQUFtQixFQUN4QkksS0FBS0ksZUFFTFUsTUFBTSx5QkFJRixZQUFBZ0IsVUFBUixZQUN5QixJQUFuQjlCLEtBQUtMLFdBQ1BLLEtBQUsrQixXQUNML0IsS0FBS0Msb0JBQ0xELEtBQUs0QixpQkFDTDVCLEtBQUtXLFdBQ0xKLGNBQWNQLEtBQUthLHFCQUNuQmIsS0FBS0csTUFBUSxFQUNiSCxLQUFLSixpQkFBbUIsRUFDeEJJLEtBQUtJLGVBRUxVLE1BQU0seUJBSUYsWUFBQWtCLE9BQVIsU0FBZUMsR0FDVEEsRUFBRUMsTUFBUS9DLEVBQVdxQyxNQUFNVyxjQUM3Qm5DLEtBQUswQixXQUdMMUIsS0FBSzhCLGFBSUQsWUFBQUYsZUFBUix1QkFDeUIsSUFBbkI1QixLQUFLTCxZQUNQWSxjQUFjUCxLQUFLUSxZQUNuQlIsS0FBS1EsV0FBYUMsYUFBWSxXQUM1QixFQUFLQyxjQUFjLEVBQUtqQixPQUN4QixFQUFLa0IsV0FDTEosY0FBYyxFQUFLTSxxQkFDbkIsRUFBS1YsTUFBUSxFQUNiLEVBQUtQLGlCQUFtQixFQUN4QixFQUFLUSxnQkFDSixPQUlDLFlBQUF1QixTQUFSLFdBQ0UsSUFBSVMsRUFBZ0JwQyxLQUFLcUMsYUFBYSxFQUFHLElBQ3pDckMsS0FBS1AsTUFBUU8sS0FBS1AsTUFBUTJDLEVBQzFCbEQsRUFBaUI2QixVQUFZZixLQUFLUCxNQUFNdUIsV0FDeENsQyxFQUFhaUMsVUFBWSxJQUFJcUIsR0FHdkIsWUFBQUwsU0FBUixXQUNFLElBQUlLLEVBQWdCcEMsS0FBS3FDLGFBQWEsR0FBSSxJQUMxQ3JDLEtBQUtQLE1BQVFPLEtBQUtQLE1BQVEyQyxFQUMxQmxELEVBQWlCNkIsVUFBWWYsS0FBS1AsTUFBTXVCLFdBQ3hDbEMsRUFBYWlDLFVBQVksSUFBSXFCLEdBR3ZCLFlBQUExQixjQUFSLFNBQXNCakIsR0FDcEIsSUFBSTJDLEVBQWdCcEMsS0FBS3FDLGFBQWEsR0FBSSxJQUMxQ3JDLEtBQUtQLE1BQVFPLEtBQUtQLE1BQVEyQyxFQUMxQnBDLEtBQUtzQyxhQUNMcEQsRUFBaUI2QixVQUFZZixLQUFLUCxNQUFNdUIsV0FDeENsQyxFQUFhaUMsVUFBWSxJQUFJcUIsR0FHdkIsWUFBQWxDLG9CQUFSLHNCQUNFSixPQUFPQyxpQkFBaUIsWUFBWSxTQUFDa0MsR0FDbkMsRUFBS0QsT0FBT0MsR0FDWixFQUFLSyxpQkFJRCxZQUFBRCxhQUFSLFNBQXFCRSxFQUFhQyxHQUNoQyxPQUFPcEIsS0FBS0MsTUFBTUQsS0FBS0UsVUFBWWtCLEVBQU1ELEVBQU0sSUFBTUEsR0FHL0MsWUFBQVYsT0FBUixXQUNFLElBQUlZLEVBQW1CMUQsU0FBUzJELGVBQWUsT0FDM0N2QyxFQUFnQndDLFNBQVNGLEVBQUlHLE1BQU16QyxPQUNuQzBDLEVBQWlCRixTQUFTRixFQUFJRyxNQUFNQyxRQUN4Q0osRUFBSUcsTUFBTXpDLE1BQVNBLEVBQVEsRUFBSyxLQUNoQ3NDLEVBQUlHLE1BQU1DLE9BQVVBLEVBQVMsRUFBSyxNQUc1QixZQUFBbEMsU0FBUixXQUNFLElBQUk4QixFQUFtQjFELFNBQVMyRCxlQUFlLE9BQzNDdkMsRUFBZ0J3QyxTQUFTRixFQUFJRyxNQUFNekMsT0FDbkMwQyxFQUFpQkYsU0FBU0YsRUFBSUcsTUFBTUMsUUFDeENKLEVBQUlHLE1BQU16QyxNQUFTQSxFQUFRLEVBQUssS0FDaENzQyxFQUFJRyxNQUFNQyxPQUFVQSxFQUFTLEVBQUssTUFHNUIsWUFBQXpDLFlBQVIsc0JBQ0UsR0FBNkIsR0FBekJKLEtBQUtKLGlCQUF1QixDQUM5QkksS0FBS0osaUJBQW1CLEVBQ3hCLElBQU0sRUFBZWIsU0FBUytELHVCQUF1QixTQUNyRDlDLEtBQUtHLE1BQVEsRUFDYkgsS0FBS2Esb0JBQXNCSixhQUFZLFdBQ3JDLEdBQUksRUFBS04sT0FBUyxJQUNoQkksY0FBYyxFQUFLTSxxQkFDbkIsRUFBS2pCLGlCQUFtQixNQUNuQixDQUNMLEVBQUtPLFFBQ0wsSUFBbUIsMkJBQUosS0FDUnlDLE1BQU16QyxNQUFRLEVBQUtBLE1BQVEsT0FHbkMsTUFJQyxZQUFBbUMsV0FBUixzQkFDTXRDLEtBQUtQLE9BQVMsTUFDaEJxQixNQUFNLDRCQUNOZCxLQUFLUCxNQUFRLElBQ2JPLEtBQUtHLE1BQVEsRUFDYkgsS0FBS0ksY0FDTGxCLEVBQWlCNkIsVUFBWWYsS0FBS1AsTUFBTXVCLFdBQ3hDaEIsS0FBS2xCLGFBQWFpQyxVQUFZLEdBQzlCUixjQUFjUCxLQUFLUSxZQUNuQlIsS0FBS1EsV0FBYUMsYUFBWSxXQUM1QixFQUFLQyxjQUFjLEVBQUtqQixPQUN4QixFQUFLa0IsV0FDTCxFQUFLUixNQUFRLEVBQ2IsRUFBS0MsZ0JBQ0osS0FDSEosS0FBS0wsV0FBWSxHQUVmSyxLQUFLUCxPQUFTLElBQ2hCcUIsTUFBTSwyQkFDTmQsS0FBS1AsTUFBUSxJQUNiTyxLQUFLRyxNQUFRLEVBQ2JILEtBQUtJLGNBQ0xsQixFQUFpQjZCLFVBQVlmLEtBQUtQLE1BQU11QixXQUN4Q2hCLEtBQUtsQixhQUFhaUMsVUFBWSxHQUM5QlIsY0FBY1AsS0FBS1EsWUFDbkJSLEtBQUtRLFdBQWFDLGFBQVksV0FDNUIsRUFBS0MsY0FBYyxFQUFLakIsT0FDeEIsRUFBS2tCLFdBQ0wsRUFBS1IsTUFBUSxFQUNiLEVBQUtDLGdCQUNKLEtBQ0hKLEtBQUtMLFdBQVksSUFHdkIsRUF6T0EsR0EyT2EsQ0FBU2IsRUFBY0ksRUFBa0JDLEVBQVlGLEVBQWFHLEdBRTFFUyxTIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNjb3JlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNjb3JlXScpIGFzIEhUTUxIZWFkaW5nRWxlbWVudDtcbmNvbnN0IGN1YmVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY3ViZV0nKSBhcyBIVE1MRGl2RWxlbWVudDtcbmNvbnN0IGN1YmVTY29yZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jdWJlLXNjb3JlXScpIGFzIEhUTUxEaXZFbGVtZW50O1xuY29uc3Qga2V5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWtleV0nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuY29uc3QgcHJvZ3Jlc3NCYXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcHJvZ3Jlc3MtYmFyXScpIGFzIEhUTUxEaXZFbGVtZW50O1xuY29uc3Qga2V5U3RhcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1rZXktc3RhcnRdJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbmNvbnN0IGtleVN0b3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1rZXktc3RvcF0nKSBhcyBIVE1MQnV0dG9uRWxlbWVudFxuY29uc3Qga2V5QWdhaW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1rZXktYWdhaW5dJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcblxuY2xhc3MgR2FtZSB7XG4gIHByaXZhdGUgY3VycmVudEtleTogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgc2NvcmU6IG51bWJlciA9IDEwMDtcbiAgcHJpdmF0ZSBpbnRlcnZhbDogbnVtYmVyID0gMjAwMDtcbiAgcHJpdmF0ZSBpbnRlcnZhbElkOiBOb2RlSlMuVGltZW91dDtcbiAgcHJpdmF0ZSBpbnRlcnZhbFN0YXR1c0JhcklkOiBOb2RlSlMuVGltZW91dDtcbiAgcHJpdmF0ZSBnYW1lU3RhdGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSB0aW1lclByb2dyZXNzQmFyOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIHdpZHRoOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBzY29yZUVsZW1lbnQ6IEhUTUxIZWFkaW5nRWxlbWVudCxcbiAgICBwcml2YXRlIGN1YmVTY29yZUVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LFxuICAgIHByaXZhdGUga2V5RWxlbWVudDogSFRNTElucHV0RWxlbWVudCxcbiAgICBwcml2YXRlIGN1YmVFbGVtZW50PzogSFRNTERpdkVsZW1lbnQsXG4gICAgcHJpdmF0ZSBwcm9ncmVzc0JhckVsZW1lbnQ/OiBIVE1MRGl2RWxlbWVudCxcbiAgKSB7IH1cblxuICBzdGFydCgpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMuc3RhcnRLZXlzSW50ZXJ2YWwoKSlcblxuICAgIHRoaXMuc3Vic2NyaWJlT25LZXlQcmVzcygpXG5cbiAgICBrZXlTdGFydC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpOiBhbnkgPT4ge1xuICAgICAgaWYgKHRoaXMuZ2FtZVN0YXRlID09PSBmYWxzZSkge1xuICAgICAgICB0aGlzLndpZHRoID0gMTtcbiAgICAgICAgdGhpcy5wcm9ncmVzc0JhcigpO1xuICAgICAgICB0aGlzLnByb2dyZXNzQmFyRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZClcbiAgICAgICAgdGhpcy5pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc3ViU2NvcmVUaW1lcih0aGlzLnNjb3JlKVxuICAgICAgICAgIHRoaXMuc2l6ZURvd24oKVxuICAgICAgICAgIHRoaXMud2lkdGggPSAxO1xuICAgICAgICAgIHRoaXMucHJvZ3Jlc3NCYXIoKTtcbiAgICAgICAgfSwgMzAwMCk7XG4gICAgICB9XG4gICAgICB0aGlzLmdhbWVTdGF0ZSA9IHRydWVcbiAgICB9KVxuXG4gICAga2V5U3RvcC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpOiBhbnkgPT4ge1xuICAgICAgdGhpcy5nYW1lU3RhdGUgPSBmYWxzZTtcbiAgICAgIHRoaXMucHJvZ3Jlc3NCYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG4gICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxTdGF0dXNCYXJJZClcbiAgICAgIHRoaXMudGltZXJQcm9ncmVzc0JhciA9IDA7XG4gICAgICB0aGlzLndpZHRoID0gOTk7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZClcbiAgICAgIGFsZXJ0KCd5b3VyIFNjb3JlOicgKyB0aGlzLnNjb3JlKVxuICAgICAgdGhpcy5zY29yZSA9IDEwMDtcbiAgICAgIGN1YmVTY29yZUVsZW1lbnQuaW5uZXJUZXh0ID0gdGhpcy5zY29yZS50b1N0cmluZygpXG4gICAgICB0aGlzLnNjb3JlRWxlbWVudC5pbm5lclRleHQgPSAnJztcbiAgICB9KVxuXG4gICAga2V5QWdhaW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKTogYW55ID0+IHtcbiAgICAgIGlmICh0aGlzLmdhbWVTdGF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLnNjb3JlID0gMTAwO1xuICAgICAgICB0aGlzLndpZHRoID0gMTtcbiAgICAgICAgdGhpcy5wcm9ncmVzc0JhcigpO1xuICAgICAgICBjdWJlU2NvcmVFbGVtZW50LmlubmVyVGV4dCA9IHRoaXMuc2NvcmUudG9TdHJpbmcoKVxuICAgICAgICB0aGlzLnNjb3JlRWxlbWVudC5pbm5lclRleHQgPSAnJztcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpXG4gICAgICAgIHRoaXMuaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnN1YlNjb3JlVGltZXIodGhpcy5zY29yZSlcbiAgICAgICAgICB0aGlzLnNpemVEb3duKClcbiAgICAgICAgICB0aGlzLndpZHRoID0gMTtcbiAgICAgICAgICB0aGlzLnByb2dyZXNzQmFyKCk7XG4gICAgICAgIH0sIDMwMDApO1xuICAgICAgICB0aGlzLmdhbWVTdGF0ZSA9IHRydWVcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgcHJpdmF0ZSBzdGFydEtleXNJbnRlcnZhbCgpOiBhbnkge1xuICAgIGxldCBwb3NzaWJsZTogc3RyaW5nID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MTIzNDU2Nzg5MFwiO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTsgaSsrKVxuICAgICAgdGhpcy5jdXJyZW50S2V5ID0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpO1xuICAgIGtleUVsZW1lbnQudmFsdWUgPSB0aGlzLmN1cnJlbnRLZXkudG9VcHBlckNhc2UoKVxuICB9XG5cbiAgcHJpdmF0ZSB0cnVlR2FtZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5nYW1lU3RhdGUgPT09IHRydWUpIHtcbiAgICAgIHRoaXMuc3RhcnRLZXlzSW50ZXJ2YWwoKVxuICAgICAgdGhpcy5hZGRTY29yZSgpXG4gICAgICB0aGlzLnNldE5ld0ludGVydmFsKClcbiAgICAgIHRoaXMuc2l6ZVVwKClcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbFN0YXR1c0JhcklkKVxuICAgICAgdGhpcy53aWR0aCA9IDE7XG4gICAgICB0aGlzLnRpbWVyUHJvZ3Jlc3NCYXIgPSAwO1xuICAgICAgdGhpcy5wcm9ncmVzc0JhcigpXG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KCdQbGVhc2UgcHJlc3MgXCJTdGFydFwiJylcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGZhbHNlR2FtZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5nYW1lU3RhdGUgPT09IHRydWUpIHtcbiAgICAgIHRoaXMuc3ViU2NvcmUoKVxuICAgICAgdGhpcy5zdGFydEtleXNJbnRlcnZhbCgpXG4gICAgICB0aGlzLnNldE5ld0ludGVydmFsKClcbiAgICAgIHRoaXMuc2l6ZURvd24oKVxuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsU3RhdHVzQmFySWQpXG4gICAgICB0aGlzLndpZHRoID0gMTtcbiAgICAgIHRoaXMudGltZXJQcm9ncmVzc0JhciA9IDA7XG4gICAgICB0aGlzLnByb2dyZXNzQmFyKClcbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQoJ1BsZWFzZSBwcmVzcyBcIlN0YXJ0XCInKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2V0S2V5KGU6IGFueSk6IHZvaWQge1xuICAgIGlmIChlLmtleSA9PT0ga2V5RWxlbWVudC52YWx1ZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICB0aGlzLnRydWVHYW1lKClcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLmZhbHNlR2FtZSgpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXROZXdJbnRlcnZhbCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5nYW1lU3RhdGUgPT09IHRydWUpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKVxuICAgICAgdGhpcy5pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICB0aGlzLnN1YlNjb3JlVGltZXIodGhpcy5zY29yZSlcbiAgICAgICAgdGhpcy5zaXplRG93bigpXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbFN0YXR1c0JhcklkKVxuICAgICAgICB0aGlzLndpZHRoID0gMTtcbiAgICAgICAgdGhpcy50aW1lclByb2dyZXNzQmFyID0gMDtcbiAgICAgICAgdGhpcy5wcm9ncmVzc0JhcigpXG4gICAgICB9LCAzMDAwKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkZFNjb3JlKCk6IHZvaWQge1xuICAgIGxldCBybmRvbTogbnVtYmVyID0gdGhpcy5yYW5kb21OdW1iZXIoNSwgMTApXG4gICAgdGhpcy5zY29yZSA9IHRoaXMuc2NvcmUgKyBybmRvbVxuICAgIGN1YmVTY29yZUVsZW1lbnQuaW5uZXJUZXh0ID0gdGhpcy5zY29yZS50b1N0cmluZygpXG4gICAgc2NvcmVFbGVtZW50LmlubmVyVGV4dCA9IGArJHtybmRvbX1gXG4gIH1cblxuICBwcml2YXRlIHN1YlNjb3JlKCk6IHZvaWQge1xuICAgIGxldCBybmRvbTogbnVtYmVyID0gdGhpcy5yYW5kb21OdW1iZXIoMjAsIDI1KVxuICAgIHRoaXMuc2NvcmUgPSB0aGlzLnNjb3JlIC0gcm5kb21cbiAgICBjdWJlU2NvcmVFbGVtZW50LmlubmVyVGV4dCA9IHRoaXMuc2NvcmUudG9TdHJpbmcoKVxuICAgIHNjb3JlRWxlbWVudC5pbm5lclRleHQgPSBgLSR7cm5kb219YFxuICB9XG5cbiAgcHJpdmF0ZSBzdWJTY29yZVRpbWVyKHNjb3JlOiBudW1iZXIpOiB2b2lkIHtcbiAgICBsZXQgcm5kb206IG51bWJlciA9IHRoaXMucmFuZG9tTnVtYmVyKDEwLCAxNSlcbiAgICB0aGlzLnNjb3JlID0gdGhpcy5zY29yZSAtIHJuZG9tXG4gICAgdGhpcy5maW5pc2hHYW1lKClcbiAgICBjdWJlU2NvcmVFbGVtZW50LmlubmVyVGV4dCA9IHRoaXMuc2NvcmUudG9TdHJpbmcoKVxuICAgIHNjb3JlRWxlbWVudC5pbm5lclRleHQgPSBgLSR7cm5kb219YFxuICB9XG5cbiAgcHJpdmF0ZSBzdWJzY3JpYmVPbktleVByZXNzKCk6IHZvaWQge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChlKSA9PiB7XG4gICAgICB0aGlzLnNldEtleShlKVxuICAgICAgdGhpcy5maW5pc2hHYW1lKClcbiAgICB9KVxuICB9XG5cbiAgcHJpdmF0ZSByYW5kb21OdW1iZXIobWluOiBudW1iZXIsIG1heDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XG4gIH1cblxuICBwcml2YXRlIHNpemVVcCgpOiB2b2lkIHtcbiAgICBsZXQgb2JqOiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYm94XCIpO1xuICAgIGxldCB3aWR0aDogbnVtYmVyID0gcGFyc2VJbnQob2JqLnN0eWxlLndpZHRoKTtcbiAgICBsZXQgaGVpZ2h0OiBudW1iZXIgPSBwYXJzZUludChvYmouc3R5bGUuaGVpZ2h0KTtcbiAgICBvYmouc3R5bGUud2lkdGggPSAod2lkdGggKyAzKSArIFwicHhcIjtcbiAgICBvYmouc3R5bGUuaGVpZ2h0ID0gKGhlaWdodCArIDMpICsgXCJweFwiO1xuICB9XG5cbiAgcHJpdmF0ZSBzaXplRG93bigpOiB2b2lkIHtcbiAgICBsZXQgb2JqOiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYm94XCIpO1xuICAgIGxldCB3aWR0aDogbnVtYmVyID0gcGFyc2VJbnQob2JqLnN0eWxlLndpZHRoKTtcbiAgICBsZXQgaGVpZ2h0OiBudW1iZXIgPSBwYXJzZUludChvYmouc3R5bGUuaGVpZ2h0KTtcbiAgICBvYmouc3R5bGUud2lkdGggPSAod2lkdGggLSAyKSArIFwicHhcIjtcbiAgICBvYmouc3R5bGUuaGVpZ2h0ID0gKGhlaWdodCAtIDIpICsgXCJweFwiO1xuICB9XG5cbiAgcHJpdmF0ZSBwcm9ncmVzc0JhcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy50aW1lclByb2dyZXNzQmFyID09IDApIHtcbiAgICAgIHRoaXMudGltZXJQcm9ncmVzc0JhciA9IDE7XG4gICAgICBjb25zdCBlbGVtZW50OiBhbnkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdteUJhcicpO1xuICAgICAgdGhpcy53aWR0aCA9IDE7XG4gICAgICB0aGlzLmludGVydmFsU3RhdHVzQmFySWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLndpZHRoID49IDEwMCkge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbFN0YXR1c0JhcklkKVxuICAgICAgICAgIHRoaXMudGltZXJQcm9ncmVzc0JhciA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy53aWR0aCsrO1xuICAgICAgICAgIGZvciAoY29uc3QgZWxlbSBvZiBlbGVtZW50KSB7XG4gICAgICAgICAgICBlbGVtLnN0eWxlLndpZHRoID0gdGhpcy53aWR0aCArIFwiJVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgMzApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZmluaXNoR2FtZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zY29yZSA+PSAyMDApIHtcbiAgICAgIGFsZXJ0KCdZb3UgV09OISBZb3VyIFNjb3JlOiAyMDAnKVxuICAgICAgdGhpcy5zY29yZSA9IDEwMDtcbiAgICAgIHRoaXMud2lkdGggPSAxO1xuICAgICAgdGhpcy5wcm9ncmVzc0JhcigpO1xuICAgICAgY3ViZVNjb3JlRWxlbWVudC5pbm5lclRleHQgPSB0aGlzLnNjb3JlLnRvU3RyaW5nKClcbiAgICAgIHRoaXMuc2NvcmVFbGVtZW50LmlubmVyVGV4dCA9ICcnO1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpXG4gICAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc3ViU2NvcmVUaW1lcih0aGlzLnNjb3JlKVxuICAgICAgICB0aGlzLnNpemVEb3duKClcbiAgICAgICAgdGhpcy53aWR0aCA9IDE7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NCYXIoKTtcbiAgICAgIH0sIDMwMDApO1xuICAgICAgdGhpcy5nYW1lU3RhdGUgPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLnNjb3JlIDw9IDApIHtcbiAgICAgIGFsZXJ0KCdUcnkgQWdhaW4hIFlvdXIgU2NvcmU6MCcpXG4gICAgICB0aGlzLnNjb3JlID0gMTAwO1xuICAgICAgdGhpcy53aWR0aCA9IDE7XG4gICAgICB0aGlzLnByb2dyZXNzQmFyKCk7XG4gICAgICBjdWJlU2NvcmVFbGVtZW50LmlubmVyVGV4dCA9IHRoaXMuc2NvcmUudG9TdHJpbmcoKVxuICAgICAgdGhpcy5zY29yZUVsZW1lbnQuaW5uZXJUZXh0ID0gJyc7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZClcbiAgICAgIHRoaXMuaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgdGhpcy5zdWJTY29yZVRpbWVyKHRoaXMuc2NvcmUpXG4gICAgICAgIHRoaXMuc2l6ZURvd24oKVxuICAgICAgICB0aGlzLndpZHRoID0gMTtcbiAgICAgICAgdGhpcy5wcm9ncmVzc0JhcigpO1xuICAgICAgfSwgMzAwMCk7XG4gICAgICB0aGlzLmdhbWVTdGF0ZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgZ2FtZSA9IG5ldyBHYW1lKHNjb3JlRWxlbWVudCwgY3ViZVNjb3JlRWxlbWVudCwga2V5RWxlbWVudCwgY3ViZUVsZW1lbnQsIHByb2dyZXNzQmFyRWxlbWVudCk7XG5cbmdhbWUuc3RhcnQoKTsiXSwic291cmNlUm9vdCI6IiJ9